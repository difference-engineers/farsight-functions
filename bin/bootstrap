#!/usr/bin/env ruby



puts "What's the name of this function?"
name = gets.chomp.gsub(/(\W|\.)/, "-")
system("mkdir #{name}/")
system("cp -r _template/* #{name}/")
system("cd #{name} && ln -sfF ../.tool-versions .tool-versions")
File.write(File.join(name, "Dockerfile"), File.read(File.join(name, "Dockerfile")).gsub("{{name}}", name))
File.write("FUNCTIONS", [**File.read("FUNCTIONS").split("\n"), name].join("\n"))
system("git add FUNCTIONS #{name}/")
system("git commit -m 'Finalizing the creation of #{name}'")
