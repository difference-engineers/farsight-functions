#!/usr/bin/env ruby

puts "What's the name of this function?"
name = gets.chomp.gsub(/(\W|\.)/, "-")
exit(1) unless system("mkdir #{name}/")
exit(1) unless system("cp -r .template/* #{name}/")
File.write(File.join(name, "Dockerfile"), File.read(File.join(name, "Dockerfile")).gsub("{{name}}", name))
File.write("SERVICES", [**File.read("SERVICES").split("\n"), name].join("\n"))
exit(1) unless system("git add SERVICES #{name}/")
exit(1) unless system("git commit -m 'Finalizing the creation of #{name}'")
