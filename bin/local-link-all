#!/usr/bin/env ruby

File.read("SERVICES").split("\n").each do |name|
  puts "Creating links for #{name}/..."
  exit unless system("bin/local #{name} ln -svfF ../.tool-versions  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/db/ .  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/.rubocop/ .  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/sorbet/ .  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/Gemfile  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/Gemfile.lock  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/boot.rb  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/mocks.rb  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/config.ru  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/configuration.rb  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/application.rb  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/database.rb  &>/dev/null")
  exit unless system("bin/local #{name} ln -svfF ../base/Rakefile  &>/dev/null")
end
